# Background

The theoretical background of our experiment is the observation that politeness seemingly violates basic communicative maxims of cooperation (Grice 1975) which is to provide the listener accurate information. Yet polite utterances are an omnipresent phenomenon in human communication. The authors of the original paper (Yoon et al. 2016)  hypothesize that polite utterances result from a trade-off between informativity and social utility, or utility of maintatining the listener's self-image. The original study was used to create and validate a model which predicts how communicative goals influence people's perception of utterances evaluating a performance.
<br>
We chose this study because we are interested in cross-linguistic comparisons and studies. Also our results will serve as a basis study to investigate the influence of the politeness markers "du" and "Sie" in German on the inferences. Because in German there are these politeness markers like "Sie" our intuition is that the interpretation will differ depending on the choice of the pronoun.
<br>
Our research question for this baseline study is therefore to investigate the influence of the communicative goal on the interpretation of utterances without the influence of "du" and "Sie". Specifically, we test whether we will get the same results as in the original study, if we completely avoid the use of "du" and "Sie".

# Research questions

This study is a replication of the second experiment from the paper "Talking with tact: Polite language as a balance between kindness and informativity" by Yoon et al. (2016) in German. In this experiment the participants are asked to infer the state of mind of the speaker in a fictional scenario presented to them. We now want to find out, if the inferred states are similar in German and in English?
<br>
<br>
We verify two major hypotheses.
<br>
Hypothesis 1 is concerned with the positive utterances and predicts that, on the one hand, the mean inferred state of the goal "nett" (nice) will be greater than the mean state of the goal "ehrlich" (honest). On the other hand, it predicts that the mean state of the goal "nett" will be greater than the mean state of the goal "gemein" (mean).
<br>
Hypothesis 2 is concerned with the negative utterances and first predicts that the mean inferred state of the goal "gemein" will be greater than the mean state of the goal "ehrlich". Secondly, this hypothesis predicts that the mean state of the goal "ehrlich" will be the same as the mean state of the goal "nett".
<br>
1. Hypothesis 1: positive utterances:
    - mean(nice_inferred) < mean (honest_inferred)
    - mean(nice_inferred) > mean(mean_inferred)
2. Hypothesis 2: negative utterances:
    - mean(mean_inferred) > mean(honest_inferred)
    - mean(honest_inferred) = mean(nice_inferred)

---|schrecklich|schlecht|okay|gut|hervorragend|Effect Goal
---|----------|------|------|---|-----|---
Ehrlich|inferred_ehr_schr|inferred_ehr_schl|inferred_ehr_ok|inferred_ehr_gut|inferred_ehr_herv|inferred_ehr
Nett|inferred_nett_schr|inferred_nett_schl|inferred_nett_ok|inferred_nett_gut|inferred_nett_herv|inferred_nett
Gemein|inferred_gem_schr|inferred_gem_schl|inferred_gem_ok|inferred_gem_gut|inferred_gem_herv|inferred_gem
Effect Utt|inferred_schr|inferred_schl|inferred_ok|inferred_gut|inferred_herv

# Design of the Experiment

## General remarks about the design
This is a rating study with a within-subject 3x5 factorial design. The design matrix is composed of three goals (nett, ehrlich, gemein = nice, honest, mean) and five utterances (furchtbar, schlecht, okay, gut, hervorragend = terrible, bad, okay, good, amazing).

## Sampling plan

We would like to recruit around 30 participants, around the same number as in the original study. The link to the experiment will be sent to all course participants and, if necessary, to all Cognitive Science students via the Cogsci mailing list. We hope to be ready to send out the link by the end of June, after our preregistration report has been approved.
<br>
As we want to investigate if the results will be the same in German as in English, we will need to exclude all participants who are not German native speakers. Otherwise we do not have any restrictions on who can participate.

## Materials

Out study is based on the paper **Yoon, E. J., Tessler, M. H., Goodman, N. D., & Frank, M. C. (2016). Talking with tact: Polite language as a balance between kindness and informativity. In _Proceedings of the 38th annual conference of the cognitive science society_ (pp. 2771-2776). Cognitive Science Society.**. We also used a star rating plugin, which is available under https://www.jqueryscript.net/other/Simple-jQuery-Star-Rating-System-For-Bootstrap-3.html. Furthermore, we used the material provided by the authors of the original paper: langcog.stanford.edu/expts/EJY/polgrice/L2_S/polgrice_L2_S.html. The sentences were translated and adapted into German by ourselves.

## Procedure

### Instruction
The participants are presented with written instructions on how the experiment will look like and what their task will be. Here they also state, that their participation is voluntary and they are informed how we will process the data.
<br>
The instruction text is the following:
<br>
<br>
_**Willkommen**
<br>
<br>
Liebe Teilnehmer,
Vielen Dank für Ihr Interesse an unserem Experiment. Diesen Versuch führen wir im Rahmen des Kurses "Experimental Psychology Lab" an der Universität Osnabrück durch. Hierbei geht es um die Einschätzung verschiedener Szenarien zwischen zwei Gesprächspartnern.
<br>
<br>
Durch das Klicken des "Experiment beginnen" Button erklären Sie sich bereit, freiwillig an unserem Experiment teilzunehmen. Sie können den Versuch jederzeit und ohne Angaben von Gründen abbrechen. Die gesammelten Daten werden nur zu wissenschaftlichen Forschungszwecken gesammelt und anonym behandelt.
<br>
<br>
Die Bearbeitung des Experiments dauert ungefähr 15 Minuten. Bitte lesen Sie sich die Aufgaben genau durch. Klicken Sie auf den "Experiment beginnen" Button, um zur Experimentbeschreibung zu gelangen.
<br>
<br>
Wir bedanken uns für Ihre Teilnahme.
<br>
Bei Fragen kontaktieren Sie uns bitte unter ptsvilodub@uos.de._
<br>
<br>
Afterwards the participants get the concrete instructions on how to do the experiment:
<br>
<br>
_**Experimentbeschreibung**
<br>
In diesem Experiment werden Ihnen verschiedene hypothetische Szenarien/Gespräche zwischen zwei Personen beschrieben. Ihre Aufgabe wird es sein die Aussagen der Gesprächspartner zu bewerten. In den Szenarien wird beschrieben was die Personen gemacht oder gesagt haben und eine mögliche Interpretation dieses Gesprächs wird Ihnen angeboten. Sie werden gebeten, die Interpretationen zu evaluieren. Dabei befindet sich auf der Bewertungsskala bei 1 die schlechteste, bei 5 die beste Bewertung.
<br>
<br>
Bitte klicken Sie auf "Weiter", um das Experiment zu beginnen._

### Main test phase

The trials start with the presentation of the scenario and underneath the participant sees the rating scale consisting of 5 hearts. Participants are asked to rate a total of 15 scenarios using the heart rating scale. The scenarios, the goals, the names and the utterances used in each trial are randomized.

### Structure of the Experiment
The experiment starts with a welcome text, followed by instructions. Then the main test phase starts and in the end participants are asked a few questions like their age, gender and they have the chance to give us feedback or leave comments.
<br>

### Trials
We only have main trials which are a rating task. The results of these main trials will then be used for our analysis.
<br>
We decided not to include practice trials, because it was not part of the original study and we still wanted to replicate it as closely as possible.
<br>
The trials are structured in the way that participants are presented with a randomized scenario and the heart rating scale (one to five hearts). The participants then answer the question using the five-heart rating scale. This is an example of a trial:
<br>
<br>
_Stellen Sie sich vor, dass Lea eine Handy App entwickelt hat, aber nicht weiß wie andere Leute darüber denken. Leonie hat die App ausprobiert. Lea fragt daraufhin Leonie: "Wie ist meine App?" **Leonie möchte ehrlich sein und antwortet: "Die App war hervorragend."**
<br>
Was denken Sie: Wie denkt Leonie **wirklich** über die App von Lea?_


## Measured variables

The variables we will measure are the speaker's rating of the performance inferred by the participants which will be measured by the rating scale. Further we will track the utterance and the goal of each trial.
<br>
<br>
The goal will be treated as a factor, the utterance as an ordered factor and the rating/inferred state as an integer, such that the mean can be calculated to produce a figure.

# Analysis Plan

## Exclusion criteria

In the analysis we will exclude all participants who took longer than 30 minutes to complete the experiment or who are not German native speakers.
<br>

## Confirmatory hypothesis testing

For the model the rating/inferred state will be transformed to an ordered factor and estimated using mo().
<br>
For the statistical model we will use the "brms" package to run a Bayesian regression model, regressing the inferred state against goal, utterance and their interactions. We will also try  a model with random by-domain effects and compare the fit.
<br>
<br>
For positive utterances, i.e. if hypothesis 1 is true, we expect the inferred state for honest utterances to be credibly higher that the inferred state for nice utterances in the posterior distribution.
<br>
If H1 is true, we expect the inferred state for nice utterances to be credibly higher than the inferred state for mean utterances in the posterior distribution.
<br>
<br>
For negative utterances, i.e. if hypothesis 2 is true, we expect the inferred state for mean utterances to be credibly higher than the inferred state for honest utterances in the posterior distribution.
<br>
If H2 is true, we expect with a credible probability that the inferred state for honest and mean utterances to be equal in the posterior distribution.

## R script
``` # This is the code for data analysis of the "Talking with tact" replication study. 

#Load all the necessary libraries

library(tidyverse)
library(brms)
library(rstan)
# set cores to use to the total number of cores (minimally 4)
options(mc.cores = max(parallel::detectCores(), 4))
# save a compiled version of the Stan model file
rstan_options(auto_write = TRUE)
library(faintr)
# set a seed for random number generator
set.seed(123)

#First, the data is read from a csv-file.
d <- read.csv("results.csv")
d1 <- read.csv("results (1).csv")
d2 <- read.csv("results (2).csv")
d3 <- read.csv("results (3).csv")
d <- rbind(d, d1)
d <- rbind(d, d2)
d <- rbind(d, d3)

#Take a first look at the data. 

glimpse(d)

#Select the data of interest: certain columns. Set the data types. Look at the data frame. 
# We *do not* need all the additional info like age etc. 
#We *need*: native languages, goal, utterance, *rating*(=inferred state), submission ID, item (domain), time spent (for removing outliers)  

d <- select(d, c(trial_number, domain, goal, utterance, inferred_goal_state, languages, timeSpent))
# set data types: RT is int, goal & utterance should be factors
# utterance is a predictor which is scaled orinally! 
# factor utterance assigns the ordered levels to the different utterances 
d <- mutate(d, goal = factor(goal), utterance = factor(utterance, levels=c("furchtbar", "schlecht", "okay", "gut", "hervorragend"), ordered=T), inferred_state = inferred_goal_state)
View(d)

# Remove outliers: exclude participants where German was not a native language, and time spent was too long (30 minutes total)
d <- filter(d, timeSpent <= 30)
#exclude non-native speakers
d <- filter(d, grepl("Deutsch", languages, ignore.case = T ))
View(d)
#Show means for each design cell: goal x utterance. 
library(Rmisc)
# calculate the means of the inferred states dependent on goal and utterance 
# this is used because it gives us the 95% confidence interval as plotted in the original paper 
dm<- summarySE(d, measurevar = "inferred_state", groupvars = c("goal", "utterance"))
# plot graph 1 of the original paper Fig 3 .  
ggplot(dm, aes(x=utterance, y=inferred_state, color=goal)) + geom_point()+geom_line(aes(group=goal), size=0.5)+geom_errorbar(aes(ymin=inferred_state-ci, ymax=inferred_state+ci))

#Fit the model: bayesian model with monotonic effects
d<- mutate(d, inferred_state = factor(inferred_state, levels=c("1", "2", "3", "4", "5"), ordered=T))
model1_1 <-brm(mo(inferred_state)~utterance+goal+utterance*goal, d)
summary(model1_1)
marginal_effects(model1, "utterance:goal")

# Check hypotheses:
#Draw posterior samples
# Inferred states for honest condition are higher than inferred states for nice condition for positive utterances
# Inferred states for nice condition are higher than inferred states for mean consition for positive utterances
# Inferred states for honest and nice conditions are equal for negative utterances
# Inferred states for mean condition are higher than for honest condition for negative utterances 

# posterior samples
post_samples <- posterior_samples(model1_1)%>% as_tibble

post_ehrlich_hervor <- post_samples$b_Intercept+post_samples$b_utteranceE4
post_nett_hervor <- post_samples$b_Intercept+post_samples$b_goalnett+post_samples$`b_utteranceE4:goalnett`
post_gemein_hervor <- post_samples$b_Intercept + post_samples$b_goalgemein + post_samples$`b_utteranceE4:goalgemein`
post_ehrlich_schr <- post_samples$b_Intercept+post_samples$b_utterance.L
post_nett_schr <- post_samples$b_Intercept + post_samples$b_goalnett + post_samples$`b_utterance.L:goalnett`
post_gemein_schr <- post_samples$b_Intercept+post_samples$b_goalgemein+post_samples$`b_utterance.L:goalgemein`

mean(mean(post_ehrlich_hervor)>mean(post_nett_hervor))
mean(mean(post_nett_hervor)>mean(post_gemein_hervor))
mean(mean(post_ehrlich_schr)==mean(post_nett_schr))
mean(mean(post_ehrlich_schr)<mean(post_gemein_schr))

#Fit a model with random by-item efects
#Check same hypotheses 

model2 <- brm(mo(inferred_state) ~ utterance+goal+utterance*goal+(1|domain), d)
summary(model2)

# check same hypotheses
post_samples2 <- posterior_samples(model2)%>% as_tibble

post_ehrlich_hervor2 <- post_samples2$b_Intercept+post_samples2$b_utteranceE4
post_nett_hervor2 <- post_samples2$b_Intercept+post_samples2$b_goalnett+post_samples2$`b_utteranceE4:goalnett`
post_gemein_hervor2 <- post_samples2$b_Intercept + post_samples2$b_goalgemein + post_samples2$`b_utteranceE4:goalgemein`
post_ehrlich_schr2 <- post_samples2$b_Intercept+post_samples2$b_utterance.L
post_nett_schr2 <- post_samples2$b_Intercept + post_samples2$b_goalnett + post_samples2$`b_utterance.L:goalnett`
post_gemein_schr2 <- post_samples2$b_Intercept+post_samples2$b_goalgemein+post_samples2$`b_utterance.L:goalgemein`

mean(mean(post_ehrlich_hervor2)>mean(post_nett_hervor2))
mean(mean(post_nett_hervor2)>mean(post_gemein_hervor2))
mean(mean(post_ehrlich_schr2)==mean(post_nett_schr2))
mean(mean(post_ehrlich_schr2)<mean(post_gemein_schr2))
```

